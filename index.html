<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EcoTech | Sustentabilidade & Comunidade</title>
  <link rel="icon" type="" href="logo ecotech.png" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
  <style>
    :root{
      --primary:#2e7d32; /* verde Eco */
      --primary-600:#1b5e20;
      --secondary:#66bb6a; /* verde claro */
      --bg:#f6faf7; /* fundo suave */
      --ink:#263238; /* texto principal */
      --muted:#5f6a6a;
      --white:#fff;
      --accent:#a5d6a7; /* detalhes */
      --card:#ffffff;
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;color:var(--ink);background:var(--bg);}
    a{color:inherit;text-decoration:none}
    .container{max-width:1180px;margin:0 auto;padding:0 24px}

    /* ===== Header ===== */
    .header{position:fixed;top:0;left:0;right:0;z-index:50;background:rgba(255,255,255,.9);backdrop-filter:saturate(160%) blur(8px);box-shadow:0 2px 10px rgba(0,0,0,.06)}
    .header-inner{height:76px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:38px;width:auto;filter:drop-shadow(0 1px 0 rgba(0,0,0,.06))}
    .brand-name{font-weight:800;letter-spacing:.3px;color:var(--primary)}
    nav ul{list-style:none;display:flex;gap:28px}
    nav a{font-weight:600;color:#35524a;opacity:.9}
    nav a:hover{color:var(--primary)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:0;border-radius:999px;padding:12px 20px;font-weight:700;cursor:pointer;transition:.25s ease;box-shadow:var(--shadow)}
    .btn-primary{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff}
    .btn-primary:hover{transform:translateY(-1px);filter:brightness(.95)}
    .btn-ghost{background:#e8f5e9;color:var(--primary);box-shadow:none}
    .btn-ghost:hover{filter:brightness(.98)}

    /* ===== Hero ===== */
    .hero{position:relative;display:grid;place-items:center;min-height:100dvh;overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:url('https://images.unsplash.com/photo-1492496913980-5013382e103b?auto=format&fit=crop&w=2000&q=80') center/cover no-repeat;transform:scale(1.04)}
    .scrim{position:absolute;inset:0;background:radial-gradient(70% 60% at 50% 40%, rgba(0, 0, 0, .15) 0%, rgba(0, 0, 0, .55) 100%), linear-gradient(180deg, rgba(0, 0, 0, .35), #1b5e20)}
    .hero-content{position:relative;z-index:1;text-align:center;color:#fff;padding:128px 24px 96px}
    .eyebrow{display:inline-flex;align-items:center;gap:8px;background:rgba(255,255,255,.16);border:1px solid rgba(255,255,255,.25);padding:8px 14px;border-radius:999px;font-weight:700;backdrop-filter:blur(6px);margin-bottom:18px}
    .hero h1{font-size:clamp(2rem,4.6vw,3.6rem);line-height:1.08;margin-bottom:14px;letter-spacing:.2px}
    .hero p{font-size:clamp(1rem,1.4vw,1.2rem);opacity:.95;max-width:760px;margin:0 auto 26px}
    .hero-cta{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:6px}

    /* ===== Sections ===== */
    section{scroll-margin-top:92px}
    .section{padding:96px 0}
    .section h2{font-size:clamp(1.6rem,3.2vw,2.2rem);margin-bottom:18px;color:#0f2d20}
    .section .lead{color:var(--muted);max-width:800px}

    /* Pilares */
    .pilares{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px;margin-top:28px}
    .card{background:var(--card);border-radius:var(--radius);padding:28px;box-shadow:var(--shadow);position:relative;overflow:hidden}
    .card .badge{position:absolute;top:14px;right:14px;background:#e8f5e9;color:var(--primary);padding:6px 10px;border-radius:999px;font-size:.78rem;font-weight:700}
    .icon-circle{width:64px;height:64px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(145deg,var(--accent),#e8f5e9);margin-bottom:12px}
    .card h3{color:var(--primary);margin:6px 0 6px}
    .card p{color:#40514e}

    /* Como funciona */
    .steps{background:#e8f5e9;border-radius:var(--radius);padding:28px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;margin-top:24px}
    .step{background:#fff;border-radius:14px;padding:22px;box-shadow:var(--shadow);position:relative}
    .step-no{position:absolute;top:-12px;left:-12px;width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:var(--primary);color:#fff;font-weight:800;box-shadow:0 6px 18px rgba(46,125,50,.35)}
    .step h4{margin:10px 0 6px;color:#0f2d20}

    /* CTA Comunidade */
    .cta{background:linear-gradient(120deg,var(--primary),var(--secondary));color:#fff;border-radius:var(--radius);padding:36px 28px;display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:center}
    @media (max-width:820px){.cta{grid-template-columns:1fr}}
    .cta form{display:flex;gap:10px;flex-wrap:wrap}
    .input{flex:1;min-width:220px;border:2px solid rgba(255,255,255,.6);background:rgba(255,255,255,.15);color:#fff;border-radius:999px;padding:12px 16px;outline:none}
    .input::placeholder{color:#eef}

    /* Sobre */
    .about{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:28px}

    /* Footer */
    footer{margin-top:48px;background:#0f2d20;color:#eaf4ed}
    .footer-inner{display:flex;gap:18px;align-items:center;justify-content:space-between;min-height:72px}
    .social a{opacity:.9}
    .social a:hover{opacity:1}

    /* ===== Modals & Toast ===== */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.5);z-index:60;padding:16px}
    .modal.open{display:grid}
    .sheet{background:#fff;border-radius:20px;max-width:640px;width:100%;padding:22px 22px 18px;box-shadow:var(--shadow)}
    .sheet h3{margin-bottom:4px}
    .sheet p{color:#4a5b57;margin-bottom:14px}
    .grid{display:grid;gap:12px}
    .field{display:grid;gap:6px}
    .field input, .field textarea, .field select{border:1.6px solid #e3efe6;border-radius:12px;padding:12px 14px;font:inherit}
    .field textarea{min-height:110px;resize:vertical}
    .sheet .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:4px}

    /* TOAST centralizado */
    .toast{
      position:fixed; inset:0; z-index:80; display:none; place-items:center; background:rgba(0,0,0,.25);
    }
    .toast.open{ display:grid; }
    .toast .bubble{
      background:#ffffff; border-top:6px solid var(--secondary); box-shadow:var(--shadow);
      padding:18px 20px; border-radius:16px; min-width:320px; max-width:90vw; text-align:left; animation:pop .22s ease-out;
    }
    .bubble .ok{font-size:24px;color:var(--primary)}
    .bubble h5{margin-bottom:2px}
    .bubble p{color:#4a5b57}
    @keyframes pop{ from{ transform:scale(.94); opacity:0; } to{ transform:scale(1); opacity:1; } }

    /* ===== App (pós-login) ===== */
    .app{display:none;min-height:100dvh;padding-top:92px}
    .app-header{background:#fff;box-shadow:var(--shadow);border-radius:var(--radius);padding:16px;display:flex;gap:12px;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:10px 14px;border-radius:999px;background:#e8f5e9;color:#0f2d20;font-weight:700;cursor:pointer;border:2px solid transparent}
    .tab.active{background:#fff;border-color:#cfe8d3;color:var(--primary);box-shadow:var(--shadow)}
    .views>section{display:none}
    .views>section.active{display:block}

    .edu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .edu-card{background:#fff;border-radius:16px;box-shadow:var(--shadow);padding:18px;display:grid;gap:8px}
    .edu-card button{justify-self:start}

    /* Minhas Hortas */
    .hortas{display:grid;gap:12px}
    .horta-item{background:#fff;border-radius:14px;box-shadow:var(--shadow);padding:14px 16px;display:flex;justify-content:space-between;align-items:center}
    .horta-item small{color:#607d71}
    .pill{background:#e8f5e9;color:var(--primary);border-radius:999px;padding:6px 10px;font-weight:700}
  </style>
</head>
<body>
  <!-- ===== Top Bar ===== -->
  <header class="header">
    <div class="container header-inner">
      <div class="brand">
        <img alt="Logo EcoTech" src="logo ecotech.png"/>
        <strong class="brand-name">EcoTech</strong>
      </div>
      <nav class="main-nav" aria-label="Primária">
        <ul>
          <li><a href="#pilares">Pilares</a></li>
          <li><a href="#como-funciona">Como funciona</a></li>
          <li><a href="#comunidade">Comunidade</a></li>
          <li><a href="#sobre">Sobre</a></li>
        </ul>
      </nav>
      <button class="btn btn-primary" id="btn-participe"><i class="ri-leaf-line"></i>PARTICIPE</button>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero" id="home">
    <div class="scrim" aria-hidden="true"></div>
    <div class="hero-content container">
      <span class="eyebrow"><i class="ri-recycle-line"></i> Projeto EcoTech</span>
      <h1>Gestão de resíduos, hortas comunitárias e saúde alimentar ao alcance de todos</h1>
      <p>Um hub interativo e educativo que potencializa a conscientização ambiental e práticas saudáveis — simples, acessível e orientado para impacto.</p>
      <div class="hero-cta">
        <a class="btn btn-primary" href="#pilares"><i class="ri-rocket-2-line"></i> Conheça os pilares</a>
        <button class="btn btn-ghost" id="btn-ghost-participe"><i class="ri-user-add-line"></i> Quero participar</button>
      </div>
    </div>
  </section>

  <main class="container" id="site">
    <!-- ===== PILARES ===== -->
    <section id="pilares" class="section">
      <h2>Nossos Pilares</h2>
      <p class="lead">Três frentes integradas que, juntas, elevam a qualidade de vida e o capital social local.</p>
      <div class="pilares">
        <!-- Gestão de Resíduos -->
        <article class="card">
          <span class="badge">Resíduos</span>
          <div class="icon-circle"><i class="ri-recycle-line"></i></div>
          <h3>Gestão de Resíduos</h3>
          <p>Boas práticas de separação, reciclagem e logística reversa para reduzir impacto e custo municipal.</p>
        </article>

        <article class="card">
          <span class="badge">Hortas</span>
          <div class="icon-circle"><i class="ri-plant-line"></i></div>
          <h3>Hortas Comunitárias</h3>
          <p>Como iniciar, manter e escalar hortas urbanas — do planejamento ao calendário de colheita.</p>
        </article>

        <article class="card">
          <span class="badge">Saúde</span>
          <div class="icon-circle"><i class="ri-restaurant-line"></i></div>
          <h3>Saúde Alimentar</h3>
          <p>Receitas sazonais, aproveitamento integral e nutrição baseada em alimentos in natura.</p>
        </article>
      </div>
    </section>

    <!-- ===== COMO FUNCIONA ===== -->
    <section id="como-funciona" class="section">
      <h2>Como funciona</h2>
      <div class="steps">
        <div class="step">
          <span class="step-no">1</span>
          <h4>Explore</h4>
          <p>Acesse conteúdos educativos sobre reciclagem, cultivo e alimentação.</p>
        </div>
        <div class="step">
          <span class="step-no">2</span>
          <h4>Conecte-se</h4>
          <p>Encontre hortas comunitárias e pontos de coleta próximos de você.</p>
        </div>
        <div class="step">
          <span class="step-no">3</span>
          <h4>Participe</h4>
          <p>Junte-se a eventos, oficinas e ações para fortalecer sua comunidade.</p>
        </div>
      </div>
    </section>

    <!-- ===== CTA Comunidade ===== -->
    <section id="comunidade" class="section">
      <div class="cta" role="region" aria-label="Inscrição">
        <div>
          <h2>Junte-se à Comunidade</h2>
          <p>Receba dicas, eventos e notícias sobre sustentabilidade na sua região. É rápido, gratuito e sem spam.</p>
        </div>
        <form id="form-newsletter">
          <input class="input" type="text" name="nome" placeholder="Seu nome" required />
          <input class="input" type="email" name="email" placeholder="Seu melhor e-mail" required />
          <button class="btn btn-primary" type="submit"><i class="ri-mail-send-line"></i> Inscrever-se</button>
        </form>
      </div>
    </section>

    <!-- ===== SOBRE ===== -->
    <section id="sobre" class="section">
      <div class="about">
        <h2>Sobre o Projeto</h2>
        <p style="margin-top:8px">O EcoTech integra tecnologia, educação e ação social para impulsionar cidades mais saudáveis e resilientes. Oferecemos conteúdos práticos, mapas colaborativos e uma rede de voluntariado para ativar mudanças locais com escala.</p>
      </div>
    </section>
  </main>

  <!-- ===== APP (pós-login) ===== -->
  <div class="app" id="app">
    <div class="container">
      <div class="app-header">
        <div class="brand" style="gap:10px">
          <img alt="Logo EcoTech" style="height:30px" src="logo ecotech.png" />
          <strong>EcoTech • Plataforma</strong>
        </div>
        <div class="tabs" role="tablist">
          <button class="tab active" data-view="explore" role="tab" aria-selected="true">Explore</button>
          <button class="tab" data-view="conecte" role="tab" aria-selected="false">Conecte-se</button>
          <button class="tab" data-view="participe" role="tab" aria-selected="false">Participe</button>
        </div>
        <!-- Sprint 4: Perfil do Usuário -->
        <button class="btn btn-ghost" id="btn-perfil" title="Editar perfil"><i class="ri-user-3-line"></i> Perfil</button>
      </div>

      <div class="views">
        <!-- Explore -->
        <section id="view-explore" class="active" aria-labelledby="tab-explore">
          <h2>Explore</h2>
          <p class="lead" style="margin-bottom:14px">Acesse conteúdos educativos sobre reciclagem, cultivo e alimentação.</p>
          <div class="edu-grid">
            <article class="edu-card">
              <h4>Guia prático de separação</h4>
              <p>Checklist doméstico e calendário de coleta seletiva.</p>
              <button class="btn btn-primary" data-edu="separacao"><i class="ri-file-list-line"></i> Abrir guia</button>
            </article>
            <article class="edu-card">
              <h4>Composteira caseira</h4>
              <p>Passo a passo com materiais acessíveis.</p>
              <button class="btn btn-primary" data-edu="composteira"><i class="ri-leaf-line"></i> Ver passo a passo</button>
            </article>
            <article class="edu-card">
              <h4>Horta em pequenos espaços</h4>
              <p>Técnicas de vasos, jardineiras e luz indireta.</p>
              <button class="btn btn-primary" data-edu="horta-pequena"><i class="ri-seedling-line"></i> Ver técnicas</button>
            </article>
            <article class="edu-card">
              <h4>Aproveitamento integral</h4>
              <p>Receitas com talos, cascas e sementes.</p>
              <button class="btn btn-primary" data-edu="aproveitamento"><i class="ri-restaurant-line"></i> Ver receitas</button>
            </article>
          </div>
        </section>

        <!-- Conecte-se -->
        <section id="view-conecte" aria-labelledby="tab-conecte">
          <h2>Conecte-se</h2>
          <p class="lead" style="margin-bottom:14px">Encontre hortas comunitárias e pontos de coleta próximos de você.</p>

          <!-- Sprint 4: Minhas Hortas -->
          <h3 style="margin:8px 0 10px">Minhas Hortas</h3>
          <form id="form-horta" class="grid" style="grid-template-columns:1fr 1fr auto">
            <input class="field" style="padding:12px 14px;border-radius:12px;border:1.6px solid #e3efe6" name="nome" placeholder="Nome da horta" required />
            <input class="field" style="padding:12px 14px;border-radius:12px;border:1.6px solid #e3efe6" name="bairro" placeholder="Bairro / Cidade" required />
            <button class="btn btn-primary" type="submit"><i class="ri-add-circle-line"></i> Adicionar</button>
          </form>

          <div class="hortas" id="lista-hortas" aria-live="polite" style="margin-top:12px">
            <!-- itens renderizados via JS -->
          </div>

          <div class="edu-grid" style="margin-top:18px">
            <article class="edu-card"><h4>Mapa colaborativo</h4><p>Em breve: cadastre e descubra iniciativas no seu bairro.</p></article>
            <article class="edu-card"><h4>Parcerias locais</h4><p>ONGs, escolas e associações de bairro.</p></article>
          </div>
        </section>

        <!-- Participe -->
        <section id="view-participe" aria-labelledby="tab-participe">
          <h2>Participe</h2>
          <p class="lead" style="margin-bottom:14px">Junte-se a eventos, oficinas e ações para fortalecer sua comunidade.</p>
          <div class="edu-grid" id="lista-eventos">
            <article class="edu-card">
              <h4>Mutirão de limpeza</h4>
              <p>Sábado, 9h, Parque Central. Traga luvas e energia!</p>
              <button class="btn btn-primary" data-evento="mutirao"><i class="ri-hand-heart-line"></i> Quero participar</button>
            </article>
            <article class="edu-card">
              <h4>Oficina de compostagem</h4>
              <p>Domingo, 10h, Centro Cultural. Vagas limitadas.</p>
              <button class="btn btn-primary" data-evento="compostagem"><i class="ri-earth-line"></i> Quero participar</button>
            </article>
          </div>
          <p style="margin-top:8px"><span class="pill" id="status-inscricoes" aria-live="polite">0 inscrições</span></p>
        </section>
      </div>
    </div>
  </div>

  <!-- ===== Modal: Cadastro ===== -->
  <div class="modal" id="modal-cadastro" role="dialog" aria-modal="true" aria-labelledby="cadastro-title">
    <div class="sheet">
      <h3 id="cadastro-title">Crie seu acesso</h3>
      <p>Ganhe acesso à plataforma e receba novidades do projeto.</p>
      <form id="form-cadastro" class="grid" autocomplete="on">
        <div class="field">
          <label for="nome">Nome</label>
          <input id="nome" name="nome" required placeholder="Seu nome completo" />
        </div>
        <div class="field">
          <label for="email">E-mail</label>
          <input id="email" type="email" name="email" required placeholder="voce@email.com" />
        </div>
        <div class="field">
          <label for="cidade">Cidade</label>
          <input id="cidade" name="cidade" placeholder="Sua cidade" />
        </div>
        <div class="actions">
          <button type="button" class="btn" id="close-cadastro">Cancelar</button>
          <button type="submit" class="btn btn-primary">Cadastrar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Modal: E-mail pós-cadastro ===== -->
  <div class="modal" id="modal-email" role="dialog" aria-modal="true" aria-labelledby="email-title">
    <div class="sheet">
      <h3 id="email-title">Envie um e-mail para a equipe</h3>
      <p>Conte rapidamente sobre como deseja contribuir. Responderemos em breve.</p>
      <form id="form-email" class="grid">
        <div class="field">
          <label for="to">Para</label>
          <input id="to" name="to" type="email" value="contato@ecotech.org" required />
        </div>
        <div class="field">
          <label for="assunto">Assunto</label>
          <input id="assunto" name="assunto" value="Quero participar do EcoTech" required />
        </div>
        <div class="field">
          <label for="mensagem">Mensagem</label>
          <textarea id="mensagem" name="mensagem" placeholder="Olá, gostaria de apoiar o projeto em..." required></textarea>
        </div>
        <div class="actions">
          <button type="button" class="btn" id="voltar-email">Voltar</button>
          <button type="submit" class="btn btn-primary"><i class="ri-send-plane-2-line"></i> Enviar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Modal: Perfil (Sprint 4) ===== -->
  <div class="modal" id="modal-perfil" role="dialog" aria-modal="true" aria-labelledby="perfil-title">
    <div class="sheet">
      <h3 id="perfil-title">Seu Perfil</h3>
      <p>Edite suas informações para manter seu cadastro atualizado.</p>
      <form id="form-perfil" class="grid" autocomplete="on">
        <div class="field">
          <label for="p_nome">Nome</label>
          <input id="p_nome" name="nome" placeholder="Seu nome" required />
        </div>
        <div class="field">
          <label for="p_email">E-mail</label>
          <input id="p_email" name="email" type="email" placeholder="email@exemplo.com" required />
        </div>
        <div class="field">
          <label for="p_cidade">Cidade</label>
          <input id="p_cidade" name="cidade" placeholder="Sua cidade" />
        </div>
        <div class="actions">
          <button type="button" class="btn" id="fechar-perfil">Cancelar</button>
          <button type="submit" class="btn btn-primary"><i class="ri-save-3-line"></i> Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== Modal: Conteúdos Educativos (Explore) ===== -->
  <div class="modal" id="modal-edu" role="dialog" aria-modal="true" aria-labelledby="edu-title">
    <div class="sheet">
      <h3 id="edu-title">Conteúdo</h3>
      <div id="edu-body" class="grid" style="gap:8px"></div>
      <div class="actions">
        <button type="button" class="btn" id="fechar-edu">Fechar</button>
        <button type="button" class="btn btn-primary" id="baixar-edu"><i class="ri-download-2-line"></i> Baixar .txt</button>
      </div>
    </div>
  </div>

  <!-- Toast de sucesso (centralizado) -->
  <div class="toast" id="toast">
    <div class="bubble">
      <i class="ri-checkbox-circle-line ok" aria-hidden="true"></i>
      <div>
        <h5 id="toast-title">Ação confirmada</h5>
        <p id="toast-msg">Tudo certo!</p>
      </div>
    </div>
  </div>

  <footer>
    <div class="container footer-inner">
      <small>&copy; 2025 Projeto EcoTech. Todos os direitos reservados.</small>
      <div class="social">
        <a href="#" aria-label="Instagram"><i class="ri-instagram-line"></i></a>
        <a href="#" aria-label="Facebook"><i class="ri-facebook-circle-line"></i></a>
        <a href="#" aria-label="Twitter"><i class="ri-twitter-x-line"></i></a>
      </div>
    </div>
  </footer>

  <script>
    // ===== Helpers =====
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];
    const open = (m)=>m.classList.add('open');
    const close = (m)=>m.classList.remove('open');

    // ===== Smooth scroll =====
    $$('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id=a.getAttribute('href');
        if(id && id.length>1){
          const el=document.querySelector(id);
          if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
        }
      })
    });

    // ===== Modais base =====
    const modalCadastro = $('#modal-cadastro');
    const modalEmail = $('#modal-email');
    const modalPerfil = $('#modal-perfil');
    const modalEdu = $('#modal-edu');
    const toast = $('#toast');
    const setToast = (title,msg)=>{ $('#toast-title').textContent=title; $('#toast-msg').textContent=msg; };

    // Botões abrir/fechar
    const openCadastro = ()=> open(modalCadastro);
    $('#btn-participe').addEventListener('click', openCadastro);
    $('#btn-ghost-participe').addEventListener('click', openCadastro);
    $('#close-cadastro').addEventListener('click', ()=> close(modalCadastro));

    // ===== Cadastro -> Email =====
    $('#form-cadastro').addEventListener('submit', (e)=>{
      e.preventDefault();
      const nome = e.target.nome.value.trim();
      const email = e.target.email.value.trim();
      const cidade = e.target.cidade.value.trim();
      const user = { nome, email, cidade };
      localStorage.setItem('ecotech_user', JSON.stringify(user));
      close(modalCadastro);
      $('#mensagem').value = `Olá, sou ${nome} (${email}, ${cidade}). Quero apoiar o EcoTech na minha região.`;
      open(modalEmail);
    });

    $('#voltar-email').addEventListener('click', ()=>{ close(modalEmail); open(modalCadastro); });

    // Envio de email (simulado com mailto + toast)
    $('#form-email').addEventListener('submit', (e)=>{
      e.preventDefault();
      const to = e.target.to.value;
      const subject = encodeURIComponent(e.target.assunto.value);
      const body = encodeURIComponent(e.target.mensagem.value);
      window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
      close(modalEmail);
      setToast('Envio confirmado','Obrigado por participar! Redirecionando para a plataforma…');
      toast.classList.add('open');
      setTimeout(()=>{ toast.classList.remove('open'); entrarNaPlataforma(); }, 1400);
    });

    function entrarNaPlataforma(){
      document.getElementById('site').style.display='none';
      document.getElementById('app').style.display='block';
      window.scrollTo({top:0, behavior:'smooth'});
      carregarPerfil(); // popula o perfil logo ao entrar
      renderHortas();
      renderInscricoes();
    }

    // ===== Header shadow on scroll =====
    const header = document.querySelector('.header');
    window.addEventListener('scroll', ()=>{
      header.style.boxShadow = window.scrollY>24 ? '0 8px 24px rgba(0,0,0,.08)' : '0 2px 10px rgba(0,0,0,.06)';
    });

    // ===== Tabs do App =====
    $$('.tab').forEach(tab=>{
      tab.addEventListener('click', ()=>{
        $$('.tab').forEach(t=>{ t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
        tab.classList.add('active'); tab.setAttribute('aria-selected','true');
        const view = tab.dataset.view;
        $$('.views>section').forEach(s=>s.classList.remove('active'));
        const id = view==='explore'?'view-explore':(view==='conecte'?'view-conecte':'view-participe');
        document.getElementById(id).classList.add('active');
      })
    });

    // ===== Sprint 4: Perfil do Usuário =====
    $('#btn-perfil').addEventListener('click', ()=>{
      carregarPerfil();
      open(modalPerfil);
    });
    $('#fechar-perfil').addEventListener('click', ()=> close(modalPerfil));

    function carregarPerfil(){
      const user = JSON.parse(localStorage.getItem('ecotech_user')||'{}');
      $('#p_nome').value = user.nome||'';
      $('#p_email').value = user.email||'';
      $('#p_cidade').value = user.cidade||'';
    }
    $('#form-perfil').addEventListener('submit', (e)=>{
      e.preventDefault();
      const user = {
        nome: e.target.nome.value.trim(),
        email: e.target.email.value.trim(),
        cidade: e.target.cidade.value.trim()
      };
      localStorage.setItem('ecotech_user', JSON.stringify(user));
      close(modalPerfil);
      setToast('Perfil atualizado','Suas informações foram salvas.');
      toast.classList.add('open'); setTimeout(()=>toast.classList.remove('open'), 1200);
    });

    // ===== Sprint 4: Explore -> Conteúdos (modal + download .txt) =====
    const eduDB = {
      'separacao': {
        titulo: 'Guia prático de separação',
        linhas: [
          '✔️ Papel: jornais, revistas, caixas (limpas e secas).',
          '✔️ Plástico: garrafas PET, embalagens (lavar antes).',
          '✔️ Metal: latas, alumínio limpo.',
          '✔️ Vidro: garrafas/potes (sem tampa metálica).',
          '❌ Não vai: papel higiênico, guardanapo sujo, espelho.',
          'Calendário: seg e qui — recicláveis; ter — orgânicos.'
        ]
      },
      'composteira': {
        titulo: 'Composteira caseira',
        linhas: [
          'Materiais: 3 baldes com tampa, furadeira, torneirinha.',
          'Passos: fure o fundo de dois baldes; monte módulos.',
          'Alimentos: cascas, talos, borra de café, folhas secas.',
          'Evitar: carne, laticínios, óleo, fezes de animais.',
          'Manutenção: umidade tipo “esponja úmida” e aeração semanal.'
        ]
      },
      'horta-pequena': {
        titulo: 'Horta em pequenos espaços',
        linhas: [
          'Recipientes: vasos 5–10L, jardineiras, garrafas cortadas.',
          'Substrato: 1/3 terra, 1/3 composto, 1/3 areia.',
          'Luz: 4–6h/dia; espécies de meia-sombra (hortelã, alface).',
          'Rega: dedos no substrato; regar quando estiver seco.',
          'Ciclo: semear a cada 2–3 semanas para colheitas contínuas.'
        ]
      },
      'aproveitamento': {
        titulo: 'Aproveitamento integral',
        linhas: [
          'Talos de brócolis: refogado com alho e limão.',
          'Cascas de banana: carne louca vegana temperada.',
          'Sementes de abóbora: assadas com páprica.',
          'Caldo de cascas: base para sopas e risotos.',
          'Segurança: higienize bem e evite partes machucadas.'
        ]
      }
    };

    $$('#view-explore [data-edu]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.getAttribute('data-edu');
        const data = eduDB[key];
        if(!data) return;
        $('#edu-title').textContent = data.titulo;
        const body = $('#edu-body');
        body.innerHTML = '';
        data.linhas.forEach(l=>{
          const p = document.createElement('p'); p.textContent = '• ' + l; body.appendChild(p);
        });
        open(modalEdu);
        // handler de download
        $('#baixar-edu').onclick = ()=>{
          const blob = new Blob(
            [data.titulo+'\n\n'+data.linhas.map(l=>'• '+l).join('\n')],
            {type:'text/plain;charset=utf-8'}
          );
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url; a.download = data.titulo.replace(/\s+/g,'_') + '.txt';
          document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
        };
      });
    });
    $('#fechar-edu').addEventListener('click', ()=> close(modalEdu));

    // ===== Sprint 4: Minhas Hortas (Conecte-se) =====
    const HORTAS_KEY = 'ecotech_hortas';
    const listaHortasEl = $('#lista-hortas');

    function getHortas(){
      try{ return JSON.parse(localStorage.getItem(HORTAS_KEY)||'[]'); }catch{ return []; }
    }
    function setHortas(arr){
      localStorage.setItem(HORTAS_KEY, JSON.stringify(arr));
    }
    function renderHortas(){
      const hortas = getHortas();
      listaHortasEl.innerHTML = '';
      if(hortas.length===0){
        const empty = document.createElement('p');
        empty.textContent = 'Nenhuma horta cadastrada ainda 👩‍🌾. Adicione a sua acima!';
        empty.style.color = '#607d71';
        listaHortasEl.appendChild(empty);
        return;
      }
      hortas.forEach((h,idx)=>{
        const item = document.createElement('div');
        item.className = 'horta-item';
        item.innerHTML = `
          <div>
            <strong>${h.nome}</strong><br/>
            <small>${h.bairro}</small>
          </div>
          <div style="display:flex;gap:8px">
            <button class="btn btn-ghost" data-act="ver" data-i="${idx}"><i class="ri-information-line"></i> Detalhes</button>
            <button class="btn btn-primary" data-act="rem" data-i="${idx}"><i class="ri-delete-bin-line"></i> Remover</button>
          </div>
        `;
        listaHortasEl.appendChild(item);
      });
      // actions
      $$('#lista-hortas [data-act="rem"]').forEach(b=>{
        b.onclick = ()=>{
          const i = +b.getAttribute('data-i');
          const arr = getHortas(); arr.splice(i,1); setHortas(arr); renderHortas();
          setToast('Horta removida','A horta foi retirada da sua lista.');
          toast.classList.add('open'); setTimeout(()=>toast.classList.remove('open'), 1000);
        };
      });
      $$('#lista-hortas [data-act="ver"]').forEach(b=>{
        b.onclick = ()=>{
          const i = +b.getAttribute('data-i');
          const h = getHortas()[i];
          $('#edu-title').textContent = h.nome;
          $('#edu-body').innerHTML = `
            <p><strong>Local:</strong> ${h.bairro}</p>
            <p>Atividades sugeridas:</p>
            <p>• Plantio colaborativo aos sábados</p>
            <p>• Ponto de troca de mudas</p>
            <p>• Mini-oficina de compostagem</p>
          `;
          open(modalEdu);
        };
      });
    }

    $('#form-horta').addEventListener('submit', (e)=>{
      e.preventDefault();
      const nome = e.target.nome.value.trim();
      const bairro = e.target.bairro.value.trim();
      if(!nome || !bairro) return;
      const arr = getHortas(); arr.push({nome,bairro}); setHortas(arr);
      e.target.reset(); renderHortas();
      setToast('Horta adicionada','Ela foi salva na sua lista.');
      toast.classList.add('open'); setTimeout(()=>toast.classList.remove('open'), 1000);
    });

    // ===== Sprint 4: Eventos -> Inscrição =====
    const INSCR_KEY = 'ecotech_inscricoes';
    function getInscr(){ try{ return JSON.parse(localStorage.getItem(INSCR_KEY)||'[]'); }catch{ return []; } }
    function setInscr(arr){ localStorage.setItem(INSCR_KEY, JSON.stringify(arr)); renderInscricoes(); }
    function renderInscricoes(){
      const n = getInscr().length;
      const el = $('#status-inscricoes');
      if(el){ el.textContent = `${n} inscrição${n!==1?'es':''}`; }
    }
    $('#lista-eventos')?.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-evento]');
      if(!btn) return;
      const id = btn.getAttribute('data-evento');
      const arr = getInscr();
      if(arr.includes(id)){
        setToast('Você já está inscrito','Este evento já está na sua lista.');
      }else{
        arr.push(id); setInscr(arr);
        setToast('Inscrição realizada','Nos vemos no evento! 🌱');
      }
      toast.classList.add('open'); setTimeout(()=>toast.classList.remove('open'), 1200);
    });

    // ===== Newsletter simples =====
    $('#form-newsletter').addEventListener('submit',(e)=>{
      e.preventDefault();
      setToast('Assinatura confirmada','Você receberá novidades por e-mail.');
      toast.classList.add('open'); setTimeout(()=>toast.classList.remove('open'), 1200);
      e.target.reset();
    });

    // Restaura estado se o usuário já tiver cadastro
    (function autoEnter(){
      const user = localStorage.getItem('ecotech_user');
      if(user){
        // Exibe app diretamente (útil para desenvolvimento)
        document.getElementById('site').style.display='none';
        document.getElementById('app').style.display='block';
        renderHortas(); renderInscricoes();
      }
    })();
  </script>
</body>
</html>
